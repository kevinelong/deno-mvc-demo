import { read_static } from "./static.ts";
export class Controller {
    routes;
    constructor(routes) {
        this.routes = routes;
    }
    add(key, callback) {
        this.routes[key] = callback;
    }
    route(key, r) {
        key = key !== "/" ? key : "/index.html";
        const full_key = r.method + " " + key;
        if (this.routes.hasOwnProperty(full_key)) {
            return this.routes[full_key](r);
        }
        const response = read_static(key);
        if (response != undefined) {
            return response;
        }
        const NOT_FOUND = { status: 404, headers: new Headers({ "Content-Type": "text/html" }) };
        return new Response("404 Not Found", NOT_FOUND);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQVcxQyxNQUFNLE9BQU8sVUFBVTtJQUVyQixNQUFNLENBQVE7SUFFZCxZQUFZLE1BQWE7UUFDdkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUVELEdBQUcsQ0FBQyxHQUFVLEVBQUUsUUFBaUI7UUFDL0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxRQUFRLENBQUM7SUFDOUIsQ0FBQztJQUdELEtBQUssQ0FBQyxHQUFVLEVBQUUsQ0FBUztRQUN6QixHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUM7UUFDeEMsTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBRXRDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLEVBQUM7WUFDdkMsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2pDO1FBRUQsTUFBTSxRQUFRLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2xDLElBQUcsUUFBUSxJQUFJLFNBQVMsRUFBQztZQUN2QixPQUFPLFFBQVEsQ0FBQztTQUNqQjtRQUVELE1BQU0sU0FBUyxHQUFHLEVBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxPQUFPLENBQUMsRUFBQyxjQUFjLEVBQUUsV0FBVyxFQUFFLENBQUMsRUFBQyxDQUFDO1FBQ3RGLE9BQU8sSUFBSSxRQUFRLENBQUMsZUFBZSxFQUFFLFNBQVMsQ0FBQyxDQUFBO0lBQ2pELENBQUM7Q0FFRiJ9