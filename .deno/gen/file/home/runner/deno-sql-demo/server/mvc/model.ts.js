import { DB } from "https://deno.land/x/sqlite/mod.ts";
export class Model {
    database;
    table_name;
    field_list;
    constructor(database, table_name, field_list) {
        this.database = database;
        this.table_name = table_name;
        this.field_list = field_list;
        const sql = `CREATE TABLE IF NOT EXISTS ${this.table_name} ( ${this.describe_fields()} );`;
        const db = new DB(this.database);
        db.query(sql);
        db.close();
    }
    describe_fields() {
        console.log(this.field_list);
        return this.field_list.map(field => `${field.field_name} ${field.field_type}`).join(", ");
    }
    create(data) {
        const fields = Object.keys(data).join(",");
        const values = Object.values(data).map(v => `'${v}'`).join(",");
        const sql = `INSERT INTO ${this.table_name} (${fields}) VALUES (${values})`;
        const db = new DB(this.database);
        db.query(sql);
        db.close();
    }
    read(where = "") {
        const sql = `SELECT * FROM ${this.table_name} ${where};`;
        const db = new DB(this.database);
        const results = [...db.query(sql).asObjects()];
        db.close();
        return results;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtb2RlbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFPdkQsTUFBTSxPQUFPLEtBQUs7SUFFaEIsUUFBUSxDQUFTO0lBQ2pCLFVBQVUsQ0FBUztJQUNuQixVQUFVLENBQVU7SUFFcEIsWUFBWSxRQUFZLEVBQUUsVUFBaUIsRUFBRSxVQUFrQjtRQUU3RCxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUN6QixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUU3QixNQUFNLEdBQUcsR0FBRyw4QkFBOEIsSUFBSSxDQUFDLFVBQVUsTUFBTSxJQUFJLENBQUMsZUFBZSxFQUFFLEtBQUssQ0FBQztRQUMzRixNQUFNLEVBQUUsR0FBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNkLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUNaLENBQUM7SUFFRCxlQUFlO1FBQ2IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDNUIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLFVBQVUsSUFBSSxLQUFLLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDNUYsQ0FBQztJQUVELE1BQU0sQ0FBQyxJQUFXO1FBQ2hCLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzNDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQSxFQUFFLENBQUEsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM5RCxNQUFNLEdBQUcsR0FBRyxlQUFlLElBQUksQ0FBQyxVQUFVLEtBQUssTUFBTSxhQUFhLE1BQU0sR0FBRyxDQUFDO1FBQzVFLE1BQU0sRUFBRSxHQUFJLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNsQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ2IsQ0FBQztJQUVELElBQUksQ0FBQyxRQUFhLEVBQUU7UUFDbEIsTUFBTSxHQUFHLEdBQUcsaUJBQWlCLElBQUksQ0FBQyxVQUFVLElBQUksS0FBSyxHQUFHLENBQUM7UUFDekQsTUFBTSxFQUFFLEdBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2xDLE1BQU0sT0FBTyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7UUFDL0MsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ1gsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztDQUNGIn0=