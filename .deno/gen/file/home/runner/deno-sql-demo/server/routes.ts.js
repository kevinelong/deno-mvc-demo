import { Model } from "./mvc/model.ts";
import { View } from "./mvc/view.ts";
import { Controller } from "./mvc/controller.ts";
const messages_model = new Model("demo.db", "messages", [
    { field_name: "id", field_type: "INTEGER PRIMARY KEY AUTOINCREMENT" },
    { field_name: "email", field_type: "text" },
    { field_name: "message_text", field_type: "text" },
    { field_name: "time_created", field_type: "DATETIME DEFAULT CURRENT_TIMESTAMP" },
]);
messages_model.create({ email: "kevinelong@gmail.com", message_text: "Greetings and Salutations!" });
messages_model.create({ email: "dude@example.com", message_text: "Wassup!?" });
const message_view = new View("<h1>{ message_text }</h1>\n<b>{ email }</b> <i>{ time_created }</i>");
const show_message = (d) => message_view.get(d);
const SUCCESS = { status: 200, headers: { "Content-Type": "text/html" } };
const SUCCESS_JSON = { status: 200, headers: { "Content-Type": "application/json" } };
export const routes = new Controller({
    "GET /messages/": (e) => { return { body: messages_model.read().map(show_message).join("\n\n"), head: SUCCESS }; },
    "POST /messages/": (e) => { return { body: JSON.stringify(messages_model.read()), head: SUCCESS_JSON }; },
});
routes.add("GET /foo/", (e) => { return { body: `bar`, head: SUCCESS }; });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicm91dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN2QyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3JDLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQWFqRCxNQUFNLGNBQWMsR0FBSSxJQUFJLEtBQUssQ0FBQyxTQUFTLEVBQUUsVUFBVSxFQUFFO0lBQ3ZELEVBQUMsVUFBVSxFQUFDLElBQUksRUFBRSxVQUFVLEVBQUMsbUNBQW1DLEVBQUM7SUFDakUsRUFBQyxVQUFVLEVBQUMsT0FBTyxFQUFFLFVBQVUsRUFBQyxNQUFNLEVBQUM7SUFDdkMsRUFBQyxVQUFVLEVBQUMsY0FBYyxFQUFFLFVBQVUsRUFBQyxNQUFNLEVBQUM7SUFDOUMsRUFBQyxVQUFVLEVBQUMsY0FBYyxFQUFFLFVBQVUsRUFBQyxvQ0FBb0MsRUFBQztDQUM3RSxDQUFDLENBQUM7QUFFSCxjQUFjLENBQUMsTUFBTSxDQUFDLEVBQUMsS0FBSyxFQUFDLHNCQUFzQixFQUFFLFlBQVksRUFBQyw0QkFBNEIsRUFBQyxDQUFDLENBQUM7QUFDakcsY0FBYyxDQUFDLE1BQU0sQ0FBQyxFQUFDLEtBQUssRUFBQyxrQkFBa0IsRUFBRSxZQUFZLEVBQUMsVUFBVSxFQUFDLENBQUMsQ0FBQztBQUszRSxNQUFNLFlBQVksR0FBRyxJQUFJLElBQUksQ0FBQyxxRUFBcUUsQ0FBQyxDQUFDO0FBQ3JHLE1BQU0sWUFBWSxHQUFHLENBQUMsQ0FBUSxFQUFDLEVBQUUsQ0FBQSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBS3JELE1BQU0sT0FBTyxHQUFHLEVBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsRUFBQyxjQUFjLEVBQUUsV0FBVyxFQUFFLEVBQUMsQ0FBQztBQUN2RSxNQUFNLFlBQVksR0FBRyxFQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEVBQUMsY0FBYyxFQUFFLGtCQUFrQixFQUFFLEVBQUMsQ0FBQztBQUduRixNQUFNLENBQUMsTUFBTSxNQUFNLEdBQUcsSUFBSSxVQUFVLENBQUM7SUFDbkMsZ0JBQWdCLEVBQUcsQ0FBQyxDQUFlLEVBQUMsRUFBRSxHQUFDLE9BQU0sRUFBQyxJQUFJLEVBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFDLE9BQU8sRUFBQyxDQUFDLENBQUEsQ0FBQztJQUN4SCxpQkFBaUIsRUFBRyxDQUFDLENBQWUsRUFBQyxFQUFFLEdBQUMsT0FBTSxFQUFDLElBQUksRUFBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBQyxZQUFZLEVBQUMsQ0FBQyxDQUFBLENBQUM7Q0FDaEgsQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFlLEVBQUMsRUFBRSxHQUFFLE9BQU0sRUFBQyxJQUFJLEVBQUMsS0FBSyxFQUFFLElBQUksRUFBQyxPQUFPLEVBQUMsQ0FBQSxDQUFBLENBQUMsQ0FBQyxDQUFDIn0=