import { Model } from "./model.ts";
import { View } from "./view.ts";
import { Controller } from "./controller.ts";
const messages_model = new Model("demo.db", "messages", [
    { field_name: "id", field_type: "INTEGER PRIMARY KEY AUTOINCREMENT" },
    { field_name: "email", field_type: "text" },
    { field_name: "message_text", field_type: "text" },
    { field_name: "time_created", field_type: "DATETIME DEFAULT CURRENT_TIMESTAMP" },
]);
messages_model.create({ email: "kevinelong@gmail.com", message_text: "Greetings and Salutations!" });
messages_model.create({ email: "dude@example.com", message_text: "Wassup!?" });
const message_view = new View("<h1>{ message_text }</h1>\n<b>{ email }</b> <i>{ time_created }</i>");
const show_message = (d) => message_view.get(d);
const SUCCESS = { status: 200, headers: new Headers({ "Content-Type": "text/html" }) };
const SUCCESS_JSON = { status: 200, headers: new Headers({ "Content-Type": "application/json" }) };
export const routes = new Controller({
    "GET /messages/": (e) => new Response(messages_model.read().map(show_message).join("\n\n"), SUCCESS),
    "POST /messages/": (e) => new Response(JSON.stringify(messages_model.read()), SUCCESS_JSON),
});
routes.add("GET /foo/", (e) => (new Response(`bar`, SUCCESS)));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicm91dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDbkMsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNqQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFLN0MsTUFBTSxjQUFjLEdBQUksSUFBSSxLQUFLLENBQUMsU0FBUyxFQUFFLFVBQVUsRUFBRTtJQUN2RCxFQUFDLFVBQVUsRUFBQyxJQUFJLEVBQUUsVUFBVSxFQUFDLG1DQUFtQyxFQUFDO0lBQ2pFLEVBQUMsVUFBVSxFQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUMsTUFBTSxFQUFDO0lBQ3ZDLEVBQUMsVUFBVSxFQUFDLGNBQWMsRUFBRSxVQUFVLEVBQUMsTUFBTSxFQUFDO0lBQzlDLEVBQUMsVUFBVSxFQUFDLGNBQWMsRUFBRSxVQUFVLEVBQUMsb0NBQW9DLEVBQUM7Q0FDN0UsQ0FBQyxDQUFDO0FBRUgsY0FBYyxDQUFDLE1BQU0sQ0FBQyxFQUFDLEtBQUssRUFBQyxzQkFBc0IsRUFBRSxZQUFZLEVBQUMsNEJBQTRCLEVBQUMsQ0FBQyxDQUFDO0FBQ2pHLGNBQWMsQ0FBQyxNQUFNLENBQUMsRUFBQyxLQUFLLEVBQUMsa0JBQWtCLEVBQUUsWUFBWSxFQUFDLFVBQVUsRUFBQyxDQUFDLENBQUM7QUFLM0UsTUFBTSxZQUFZLEdBQUcsSUFBSSxJQUFJLENBQUMscUVBQXFFLENBQUMsQ0FBQztBQUNyRyxNQUFNLFlBQVksR0FBRyxDQUFDLENBQVEsRUFBQyxFQUFFLENBQUEsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUtyRCxNQUFNLE9BQU8sR0FBRyxFQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksT0FBTyxDQUFDLEVBQUMsY0FBYyxFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUMsQ0FBQztBQUNwRixNQUFNLFlBQVksR0FBRyxFQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksT0FBTyxDQUFDLEVBQUMsY0FBYyxFQUFFLGtCQUFrQixFQUFFLENBQUMsRUFBQyxDQUFDO0FBR2hHLE1BQU0sQ0FBQyxNQUFNLE1BQU0sR0FBRyxJQUFJLFVBQVUsQ0FBQztJQUNuQyxnQkFBZ0IsRUFBRyxDQUFDLENBQVMsRUFBQyxFQUFFLENBQUEsSUFBSSxRQUFRLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxDQUFDO0lBQzNHLGlCQUFpQixFQUFHLENBQUMsQ0FBUyxFQUFDLEVBQUUsQ0FBQSxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLFlBQVksQ0FBQztDQUNuRyxDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQVMsRUFBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDIn0=